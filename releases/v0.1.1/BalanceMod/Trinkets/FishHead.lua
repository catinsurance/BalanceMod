local a={Trinket=Isaac.GetTrinketIdByName("Fish Head"),Chance=1/4,BlacklistedFlags={DamageFlag.DAMAGE_FIRE,DamageFlag.DAMAGE_CLONES,DamageFlag.DAMAGE_POOP,DamageFlag.DAMAGE_DEVIL,DamageFlag.DAMAGE_TNT,DamageFlag.DAMAGE_IV_BAG,DamageFlag.DAMAGE_FAKE,DamageFlag.DAMAGE_CHEST}}function a:OnEntityHurt(b,c,d,e)local f=b:ToPlayer()if not f:HasTrinket(a.Trinket)then return end;local g=f:GetTrinketRNG(a.Trinket)local h=g:RandomFloat()if h<a.Chance then local i;if e.Entity==nil then i=true else if e.Entity.Parent~=nil then i=(e.Entity.Parent:ToPlayer()or e.Entity.Parent:ToFamiliar())~=nil end;if e.SpawnerEntity~=nil then i=(e.Entity.SpawnerEntity:ToPlayer()or e.Entity.SpawnerEntity:ToFamiliar())~=nil end;if i==nil then for c,j in ipairs(a.BlacklistedFlags)do if d&j==j then i=true;break end end end;if i==nil then i=e.Entity:ToPlayer()~=nil end end;if not i then for c=1,f:GetTrinketMultiplier(a.Trinket)do Isaac.Spawn(EntityType.ENTITY_FAMILIAR,FamiliarVariant.BLUE_FLY,LocustSubtypes.LOCUST_OF_PESTILENCE,f.Position,Vector(0,0),f)end end end end;return function(k)k:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG,a.OnEntityHurt,EntityType.ENTITY_PLAYER)if not EID then return end;EID:addTrinket(a.Trinket,"1/4 chance to spawn a Locust of Pestilence when Isaac takes damage#Locust deals double your damage and applies poison")end