local a=require("BalanceMod.Utility.PlayerTracker")local b=require("BalanceMod.Utility.ChargeBars")local c={Item=Isaac.GetItemIdByName("Breath of Life"),IFrames=50,InvinciblePlayers={},ChargeBarPlayers={}}function c:OnUpdate()for d,e in ipairs(a:GetPlayers())do if e:GetActiveItem(ActiveSlot.SLOT_PRIMARY)==c.Item then local f=a:GetPlayerIndex(e)if e:GetActiveCharge()<1 then if c.InvinciblePlayers[f]==nil then c.InvinciblePlayers[f]=true;e:SetMinDamageCooldown(c.IFrames)local g=Sprite()g:Load(b.DefaultSprite,true)local h=c.IFrames*2;c.ChargeBarPlayers[f]=b:MakeCustomChargeBar(e,g,h,h,-1)end else if c.ChargeBarPlayers[f]~=nil then b:DeleteCustomChargeBar(e,c.ChargeBarPlayers[f])end;c.InvinciblePlayers[f]=nil;c.ChargeBarPlayers[f]=nil end end end end;return function(i)i:AddCallback(ModCallbacks.MC_POST_UPDATE,c.OnUpdate)if EID then EID:addCollectible(c.Item,"Isaac will become invincible for a short time when his charge is fully depleted#Deplete charge by holding the active item button#{{Warning}} Holding for too long after becoming invincible will deal damage to Isaac every second#Charge will regenerate when active item button not held#Touching enemies while invincible summons a beam of light to damage them")end;return{OldItemId=CollectibleType.COLLECTIBLE_BREATH_OF_LIFE,NewItemId=c.Item}end