local a=RegisterMod("Balance Mod",1)local b=require("BalanceMod.Utility.ChargeBars")local c=require("BalanceMod.Utility.SaveManager")local d=require("BalanceMod.API.GiantBookApi")local e=require("BalanceMod.Utility.PoolHelper")local function f(g,h)for i,j in pairs(g)do if j==h then return true end end end;c:Init(a)d:Init(a)a:AddCallback(ModCallbacks.MC_POST_PICKUP_INIT,e.PickupSpawned,PickupVariant.PICKUP_COLLECTIBLE)a:AddCallback(ModCallbacks.MC_POST_RENDER,b.UpdateAllCustomChargeBars)local k={}local l={}k[#k+1]=include("BalanceMod.Items.Dataminer")(a)include("BalanceMod.Items.BreathOfLife")(a)k[#k+1]=include("BalanceMod.Items.PlanC")(a)k[#k+1]=include("BalanceMod.Items.MomsPad")(a)include("BalanceMod.Items.LemonMishap")(a)k[#k+1]=include("BalanceMod.Items.D10")(a)include("BalanceMod.Items.BlackBean")(a)k[#k+1]=include("BalanceMod.Items.RazorBlade")(a)k[#k+1]=include("BalanceMod.Items.Abel")(a)include("BalanceMod.Items.DeadBird")(a)include("BalanceMod.Items.CarrotJuice")(a)include("BalanceMod.Trinkets.Nazar")(a)l[#l+1]=include("BalanceMod.Trinkets.FishHead")(a)include("BalanceMod.NPCs.MomsHand")(a)include("BalanceMod.NPCs.HealthChanges")(a)include("BalanceMod.Misc.ItemQualityTweaks")(a)include("BalanceMod.Misc.ChadItem")(a)include("BalanceMod.Misc.GishItem")(a)function a:OnGameStart()local m=Game():GetItemPool()for i,n in ipairs(k)do if n then m:RemoveCollectible(n.OldItemId)end end;for i,o in ipairs(l)do if o then m:RemoveTrinket(o.OldItemId)end end end;function a:PickupInit(p)if p.FrameCount==1 then for i,o in ipairs(l)do if o and o.OldItemId==p.SubType then Isaac.Spawn(EntityType.ENTITY_PICKUP,PickupVariant.PICKUP_TRINKET,o.NewItemId,p.Position,Vector(0,0),nil)p:Remove()break end end end end;function a:CorrectCharacter(q)for i,n in ipairs(k)do if n then if q:HasCollectible(n.OldItemId,false)then local r;for s=ActiveSlot.SLOT_PRIMARY,ActiveSlot.SLOT_POCKET2 do if q:GetActiveItem(s)==n.OldItemId then r=s;break end end;if r then local t=q:GetActiveCharge(r)q:RemoveCollectible(n.OldItemId,false,r,false)q:AddCollectible(n.NewItemId,t,false,r,0)else q:RemoveCollectible(n.OldItemId,false,nil,false)q:AddCollectible(n.NewItemId,nil,false)end end end end;for i,o in ipairs(l)do if o then if q:HasTrinket(o.OldItemId,true)then q:TryRemoveTrinket(o.OldItemId)q:AddTrinket(o.NewItemId,false)end end end end;a:AddCallback(ModCallbacks.MC_POST_GAME_STARTED,c.Load)a:AddCallback(ModCallbacks.MC_PRE_GAME_EXIT,c.Flush)a:AddCallback(ModCallbacks.MC_POST_GAME_END,c.Flush)a:AddCallback(ModCallbacks.MC_POST_GAME_STARTED,a.OnGameStart)a:AddCallback(ModCallbacks.MC_POST_PLAYER_UPDATE,a.CorrectCharacter,0)a:AddCallback(ModCallbacks.MC_POST_PICKUP_UPDATE,a.PickupInit,PickupVariant.PICKUP_TRINKET)